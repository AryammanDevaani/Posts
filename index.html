<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AezDez</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="favicon.png">
  <style>
    :root {
      --bg: #484865;
      --text: #f5f5f5;
      --accent: #ff4242;
      --button-bg: #1a1a1b;
      --button-hover: #2c2c2e;
      --border: #d36767;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-font-smoothing: antialiased;
      font-family: 'Inter', sans-serif;
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 4rem 2rem;
      text-align: center;
      overflow: hidden;
    }

    header {
      font-size: 5rem;
      font-weight: 900;
      margin-bottom: 3rem;
      letter-spacing: 0.5px;
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
    }

    #games-button,
    #profile-button {
      position: absolute;
      cursor: pointer;
      user-select: none;
      z-index: 2;
    }

    #games-button {
      width: 120px;
      height: 120px;
    }

    #profile-button {
      width: 90px;
      height: 90px;
    }

    #games-button img,
    #profile-button img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  </style>
</head>

<body>
  <header>AezDez</header>
  <div id="games-button"><img src="game-image.png" style="width: 120px; height: 120px;"></div>
  <div id="profile-button"><img src="/profile-image.jpg" style="width: 90px; height: 90px;"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <script>
    // Initialize Matter.js engine
    const { Engine, Render, World, Bodies, Body, Constraint, Mouse, MouseConstraint } = Matter;

    const engine = Engine.create();
    const world = engine.world;

    // Create renderer
    const render = Render.create({
      element: document.body,
      engine: engine,
      options: {
        width: window.innerWidth,
        height: window.innerHeight,
        wireframes: false,
        background: 'transparent'
      }
    });

    // Get header position and estimate second "e" center hole position
    const header = document.querySelector('header');
    const headerRect = header.getBoundingClientRect();
    const eCenterX = headerRect.left + headerRect.width * (4.7 / 6.08);
    const eCenterY = headerRect.top + headerRect.height / 2;

    // Create small anchor point to visualize ropes tied around "e" hole
    const anchorPoint = Bodies.circle(eCenterX, eCenterY, 7, {
      isStatic: true,
      render: { fillStyle: '#fff', strokeStyle: '#000', lineWidth: 0 }
    });
    World.add(world, anchorPoint);

    // Games button physics body
    const gamesButton = document.getElementById('games-button');
    const gamesBody = Bodies.rectangle(
      eCenterX - 90, // Adjusted offset for larger size
      eCenterY + 250,
      60, // 100% increase
      85,
      {
        frictionAir: 0.01,
        restitution: 0.5
      }
    );

    // Profile button physics body
    const profileButton = document.getElementById('profile-button');
    const profileBody = Bodies.rectangle(
      eCenterX + 90, // Adjusted offset for larger size
      eCenterY + 250,
      90, // 50% increase
      90,
      {
        frictionAir: 0.01,
        restitution: 0.5
      }
    );

    // Constraints (long black ropes for both, tied to "e" hole)
    const gamesConstraint = Constraint.create({
      pointA: { x: eCenterX, y: eCenterY },
      bodyB: gamesBody,
      pointB: { x: 0, y: -60 }, // Adjusted for larger size
      length: 250,
      stiffness: 0.0005,
      damping: 0.05,
      render: { strokeStyle: '#000', lineWidth: 2 }
    });

    const profileConstraint = Constraint.create({
      pointA: { x: eCenterX, y: eCenterY },
      bodyB: profileBody,
      pointB: { x: 0, y: -45 }, // Adjusted for larger size
      length: 200,
      stiffness: 0.00045,
      damping: 0.05,
      render: { strokeStyle: '#000', lineWidth: 2 }
    });

    // Add bodies and constraints to world
    World.add(world, [gamesBody, profileBody, gamesConstraint, profileConstraint]);

    // Sync DOM elements with physics bodies
    function updatePositions() {
      const gamesX = gamesBody.position.x - 60; // Adjusted for larger size
      const gamesY = gamesBody.position.y - 60;
      gamesButton.style.left = `${gamesX}px`;
      gamesButton.style.top = `${gamesY}px`;
      gamesButton.style.transform = `rotate(${gamesBody.angle}rad)`;
      console.log(`Games button position: x=${gamesX}, y=${gamesY}`);

      const profileX = profileBody.position.x - 45; // Adjusted for larger size
      const profileY = profileBody.position.y - 45;
      profileButton.style.left = `${profileX}px`;
      profileButton.style.top = `${profileY}px`;
      profileButton.style.transform = `rotate(${profileBody.angle}rad)`;
    }

    // Mouse interaction for dragging
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
      mouse: mouse,
      constraint: { stiffness: 0.2, render: { visible: false } }
    });
    World.add(world, mouseConstraint);

    // Click events
    gamesButton.addEventListener('click', () => {
      window.location.href = './games';
    });

    profileButton.addEventListener('click', () => {
      window.location.href = 'https://x.com/AryammanDevaani';
    });

    // Run engine and renderer
    Engine.run(engine);
    Render.run(render);

    // Update loop for DOM elements
    Matter.Events.on(engine, 'afterUpdate', updatePositions);

    // Handle window resize
    window.addEventListener('resize', () => {
      render.canvas.width = window.innerWidth;
      render.canvas.height = window.innerHeight;
      const newHeaderRect = header.getBoundingClientRect();
      const newECenterX = newHeaderRect.left + newHeaderRect.width * (4.7 / 6);
      const newECenterY = newHeaderRect.top + newHeaderRect.height / 2;
      gamesConstraint.pointA.x = newECenterX;
      gamesConstraint.pointA.y = newECenterY;
      profileConstraint.pointA.x = newECenterX;
      profileConstraint.pointA.y = newECenterY;
      Body.setPosition(anchorPoint, { x: newECenterX, y: newECenterY });
    });

    // Apply initial oscillation
    Body.applyForce(gamesBody, gamesBody.position, { x: 0.05, y: 0 });
    Body.applyForce(profileBody, profileBody.position, { x: -0.05, y: 0 });
  </script>
</body>

</html>